---
name: Air Sampling Pump
tools: [STM32, FreeRTOS, TouchGFX, C, C++, PID Control]
image: https://instrutherm.com.br/media/catalog/product/cache/1fff4d188f64e200d7e2f24d317b822f/b/o/bomba-de-amostragrem_2_.jpg
description: Air sampling pump to measure exposure to harmful dust, particulates and gases used for work safety.
---

# Air Sampling Pump

### Description

Developed for a client, personal sampling pumps play an important role in measuring exposure to harmful dust, particulates and gases. Frequently used in construction, industrial and emergency applications, personal sampling pumps help workers protect themselves and stay in compliance with various regulatory standards.

### Technical Details

The project consists of a main PCB powered by an **STM32F4** microcontroller used to control a small air pump (DC motor), maintaining the configured flow level steady for a long period of time (as long as 8 hours of constant use) using a **PID control loop**. The main challenge is to maintain a steady flow as the battery voltage decays over time, thus a closed loop PID control.

The board is battery powered, and has also a 2.4-inch LCD display (RGB 656 interface) that allows users to use an embedded GUI to configure measurements, view recorded data and manage equipment settings via a 4-button **capacitive touch interface**.

I helped to choose the main hardware components (microcontroller, flash, RAM, air pump, DC motor driver, LCD), reviewed EE schematics and PCB board design on Altium Designer, and developed the entire firmware using _C and C++_:

-   GUI development using [**TouchGFX**](https://support.touchgfx.com/docs/introduction/welcome) framework from STMicroelectronics
-   Firmware architecture and development on **FreeRTOS**
-   PID controller definition and tunning
-   Battery fuel gauge and charger control via IÂ²C (Texas Instruments ICs)
-   4 button capacitive touch interface

### Results

Componets were chosen to make the product competitive in the Brazilian maket considering price and technologic difference from its competitors.

The whole project was developed in two years (2021-2022) and is currently being manufactured. You can explore it on the [client's website](https://www.instrutherm.com.br/bomba-mod-bap-6000-de-amostragem-programavel-para-poeira-e-gases-display-colorido-e-tempo-de-ajuste-programavel-com-certificado-de-calibrac-o), a prominent vendor of measuring equipment in Brazil.

<Carousel>
    <CustomImage
        src="/assets/bomba-de-amostragem_1.jpg"
        alt="BAP-6000 product shot"
    />
    <CustomImage
        src="/assets/bomba-de-amostragem_2.jpg"
        alt="BAP-6000 product shot"
    />
</Carousel>
